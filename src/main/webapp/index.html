<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<!-- lien avec la (les) page(s) de style. Suivez le chemin relatif pour -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
<link rel="stylesheet" type="text/css" href="style.css">

<style>
table, th, td {
  border: 1px solid;
  padding:5px;
}
table {
  border-collapse: collapse;
}
div {
margin-top: 10px;}
</style>
<script charset="ISO-8859-1">
// Fonction pour charger les DJs depuis une URL
function loadDJs(url) {
	
	var HTTPrequest = {
			headers:{
				"content-type":"application/json;"
			},
			method:"GET"
	};
	
	// Envoi de la requête fetch pour récupérer les DJs
	fetch(url, HTTPrequest)
	.then(response => response.json())
	.then(response => process(response)) // Appel de la fonction de traitement
	.catch(error => alert("Erreur : " + error));
}

// Fonction pour traiter les DJs récupérés
function process(djs) {
	var djlist = document.getElementById("djlist");
	
	// Suppression des enfants de la liste des DJs s'il y en a
	if (djlist.hasChildNodes()) {
		djlist.removeChild(djlist.firstChild);
	}
	
	// Création d'un tableau pour afficher les DJs
	var table = document.createElement("table");
	djlist.appendChild(table);
	var thead = document.createElement("thead");
	var trHead = document.createElement("tr");
	// Ajout des en-têtes de colonne
	trHead.innerHTML = "<th class='column-header'>Nom</th>" +
	                   "<th class='column-header'>Prénom</th>" +
	                   "<th class='column-header'>Nom de scène</th>" +
	                   "<th class='column-header'>Date de naissance</th>" +
	                   "<th class='column-header'>Lieu de résidence</th>" +
	                   "<th class='column-header'>Style de musique</th>";
	thead.appendChild(trHead);
	table.appendChild(thead);
	// Parcours des DJs pour les afficher dans le tableau
	for (var dj of djs) {
		var tr = document.createElement("tr");
		
		// Création des cellules de données pour chaque DJ
		var td_nom = document.createElement("td");
		td_nom.append(dj.nom);
		var td_prenom = document.createElement("td");
		td_prenom.append(dj.prenom);
		var td_nomDeScene = document.createElement("td");
		td_nomDeScene.append(dj.nomDeScene);
		var td_dateDeNaissance = document.createElement("td");
		td_dateDeNaissance.append(dj.dateDeNaissance);
		var td_lieuDeResidence = document.createElement("td");
		td_lieuDeResidence.append(dj.lieuDeResidence);
		var td_styleMusical = document.createElement("td");
		td_styleMusical.append(dj.styleMusical);
		
		// Ajout des cellules de données à la ligne du tableau
		tr.appendChild(td_nom);
		tr.appendChild(td_prenom);
		tr.appendChild(td_nomDeScene);
		tr.appendChild(td_dateDeNaissance);
		tr.appendChild(td_lieuDeResidence);
		tr.appendChild(td_styleMusical);
		table.appendChild(tr);
	}
}
</script>
<title>Liste des DJs</title></head>
<body onload="loadDJs('/ProjetJEE/api/dj-management')">

<center>
<!-- Titre principal et boutons de navigation -->
<h1>Liste des DJs</h1>
<a href="">
        <button>DJ</button>
</a>
<a href="event.html">
        <button>Prochains events</button>
</a>
<a href="club.html">
        <button>Clubs</button>
</a>
</center></br>

<!-- Conteneur principal avec marges -->
<div class="main-container-jee" style="margin:2%;">
<!-- Div pour afficher la liste des DJs -->
<div id="djlist"></div>

<!-- Liens pour modifier la liste et ajouter un DJ en allant sur les autres pages -->
<a href="modification.html">
     <button>Modifier la liste</button>
</a> 

<a href="ajout.html">
        <button>Ajouter un DJ</button>
</a>
</div>

</body>
</html>
